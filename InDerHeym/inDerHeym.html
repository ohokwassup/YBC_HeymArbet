<meta charset = "utf-8" />

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>

<!-- include ImageMapster -->
<!-- include UnderScore.js for shuffling arrays? http://underscorejs.org/# -->

<script>

var roomNum = 0; //rooms completed
var roomTotal = 5; //rooms in game - constant
var currentRoom = ""; //name of current room - init here
var currentItem = ""; //name of current item to be found - init here
var itemNum = 0; //index of current item
var itemTotal; //items in current room, constant in each room
    
// toggle between Hebrew characters and transliteration
// default is 0 - Hebrew, 1 - transliteration
var langPref = 0;

var house = [
  ["Bedroom", [
        ["bed"], 
        ["closet"], 
        ["shelf"], 
        ["desk"],
        ["computer"], 
        ["pillow"]
    ]],
  ["Bathroom", [
      ["bath"], 
      ["shower"], 
      ["sink"], 
      ["trashcan"], 
      ["toilet"],
      ["toothbrush"],
      ["towel"],
      ["mirror"],
      ["soap"]
  ]],
  ["Kitchen", [
        ["oven", ['דער אויוון', 'der oyvn']],
        ["range", ['די פּליטע', 'di plite']],
        ["dishwasher", ['דער כּלים־וואַשער', 'der keylim-vasher']],
        ["microwave", ['דער מיקראָאויוון', 'der mikrooyvn']],
        ["pot", ['דער טאָפּ', 'der top']],
        ["pan", ['די סקאָווערדע', 'di skoverde']],
        ["knife", ['דער מעסער', 'der meser']],
        ["refrigerator", ['דער פֿרידזשידער', 'der fridzhider']],
        ["freezer", ['דער פֿרירער', 'der frirer']],
        ["cupboard", ['דער שראַנק', 'der shrank']]
   ]],
  ["DiningRoom", [
        ["fork"],
        ["spoon"], 
        ["plate"],
        ["knife"],
        ["bowl"],
        ["table"],
        ["chair"],
        ["napkin"]
  ]],
  ["LivingRoom", [
        ["armchair", ['דער פֿאָטעל', 'der fotel']],
        ["rug", ['דער טעפּעך', 'der tepekh']], 
        ["lamp", ['דער לאָמפּ', 'der lomp']],
        ["tv", ['דער טעלעוויזאָר', 'der televizor']],
        ["painting", ['דאָס בילד', 'dos bild']],
        ["couch", ['דער קושעטקע', 'der kushetke']]
        ["window", ['דער פֿענצטער', 'der fentster']]
  ]]
];

var questions = [" װוּ איז", "Vu iz "];
var responses = {
    correct: ["ריכטיק", "Rikhtik!"], 
    incorrect: ["", "Nisht rikhtik. Git nokh a pruv!"]
};

function makeQuestion() {
    var q = questions[langPref];
    var obj = items.currentItem[langPref];
    document.getElementById("question").innerHTML = q + obj + "?";
}
    
function makeResponse() {
    
}
    
//display next question in current room
function nextQuestion() {
  if (itemNum == itemTotal) {
    itemNum = 0;
    nextRoom();
  } else {
    makeQuestion();
    itemNum++;
  }  
}

//move to next room
function nextRoom() {
  roomNum++;
  if (roomNum == roomTotal) {
      endGame();
  } else {
      currentRoom = rooms[roomNum];
      itemTotal = house.currentRoom.length;
      //display new room, hide old room - jQuery?
      nextQuestion();
  }
}
    
function correct() {
    document.getElementById("response").innerHTML = responses.correct[langPref];
}
    
function incorrect() {
    document.getElementById("response").innerHTML = responses.incorrect[langPref];
}

function check(x) {
  if (x === currentItem) {
    correct();
    nextQuestion();
  } else {
    incorrect();
  }
}
    
function endGame() {
    //display results, show missed questions
}
    
function init() {
    currentRoom = rooms[0];
    itemTotal = house.currentRoom.length;
    document.getElementById("response").innerHTML = currentRoom;
    currentItem = currentRoom[0];
    document.getElementById("question").innerHTML = currentItem;
//    nextQuestion();
//    document.getElementById("question").innerHTML = "Hello!";
}
    
// onclick for language toggle
function changeLang() {
    // after changing langPref from UI interaction...
    makeQuestion();
    makeResponse();
}

// testing to see why init isn't working properly...
function changetext() {
    currentRoom = rooms[0];
    var currentItems = house.currentRoom;
    var x = house[0];
    document.getElementById("response").innerHTML = x;
}
</script>

<!--
* jQueryUI to toggle between Hebrew letters and transliterated
* jQueryUI progress bar for number of objects found out of total
-->

<div id="response">
    <p>Response</p>
</div>
<div id="question">
    <p>Question</p>
</div>

<button onclick="changetext()">Start quiz!</button>

<!-- 
* images currently linked to www.image-maps.com, must upload to server 
* Resize image maps: http://blog.outsharked.com/p/image-map-resizer.html
-->

<div id="bedroom">
</div>

<div id="bathroom">
<img id="bathroom" src="http://www.image-maps.com/m/private/0/rvc81ko2u0hgoh8c0hple6a015_bathroom.png" usemap="#bathroom" />
</div>

<div id="kitchen">
<img id="kitchen" src="http://www.image-maps.com/m/private/0/rvc81ko2u0hgoh8c0hple6a015_kitchen.png" usemap="#kitchen" />
</div>

<div id="diningRoom">
</div>

<div id="livingRoom">
<img id="livingRoom" src="http://www.image-maps.com/m/private/0/rvc81ko2u0hgoh8c0hple6a015_living_room.png" usemap="#livingRoom" />
</div>

<!-- image maps - no href, onclick compare to current question -->

<map name="livingRoom" id="livingRoom">
<area alt="window" title="window" href="javascript:void(0)" shape="rect" coords="152,20,318,134" style="outline:none;" target="_self" onclick="check('window')"/>
<area alt="painting" title="painting" href="javascript:void(0)" shape="rect" coords="0,19,120,98" style="outline:none;" onclick="check('painting')"/>
<area alt="lamp" title="lamp" href="javascript:void(0)" shape="poly" coords="89,145,104,101,120,98,132,100,150,145,140,175,134,208,107,204" style="outline:none;" target="_self" onclick="check('lamp')" />
<area alt="lamp" title="lamp" href="javascript:void(0)" shape="poly" coords="337,169,326,195,338,227,348,238,360,234,366,200,358,168" style="outline:none;" target="_self" onclick="check('lamp')" />
<area alt="tv" title="tv" href="javascript:void(0)" shape="poly" coords="297,327,333,338,367,322,366,285,349,267,300,282" style="outline:none;" target="_self" onclick="check('tv')" />
<area alt="rug" title="rug" href="javascript:void(0)" shape="poly" coords="112,348,156,333,201,327,240,331,271,339,273,356,214,377,147,377,113,366" style="outline:none;" target="_self" onclick="check('rug')" />
<area alt="armchair" title="armchair" href="javascript:void(0)" shape="poly" coords="1,315,61,340,138,303,140,219,132,208,84,200,88,115,75,107,2,117" style="outline:none;" target="_self" onclick="check('armchair')" />
<area alt="couch" title="couch" href="javascript:void(0)" shape="poly" coords="161,146,301,145,317,161,315,192,312,208,326,218,332,244,320,252,321,270,299,281,295,311,273,313,270,278,241,264,210,261,186,261,161,268,157,249,144,239,142,218,160,202,152,169,153,155" style="outline:none;" target="_self" onclick="check('couch')" />
<area alt="table" title="table" href="javascript:void(0)" shape="poly" coords="146,326,149,278,169,267,192,265,217,265,239,268,258,273,269,282,274,327,262,329,248,322,191,320,160,328" style="outline:none;" target="_self" onclick="check('table')"  />
<area alt="table" title="table" href="javascript:void(0)" shape="poly" coords="287,388,286,335,295,325,329,337,365,322,365,356,307,388" style="outline:none;" target="_self" onclick="check('table')" />
</map>

<map name="kitchen" id="kitchen">
<area alt="oven" title="oven" href="javascript:void(0)" shape="rect" coords="176,263,325,385" style="outline:none;" target="_self" onclick="javascript:check('oven')" />
<area alt="range" title="range" href="javascript:void(0)" shape="rect" coords="180,207,322,264" style="outline:none;" target="_self" onclick="javascript:check('range')" />
<area alt="dishwasher" title="dishwasher" href="javascript:void(0)" shape="rect" coords="409,262,505,384" style="outline:none;" target="_self" onclick="javascript:check('dishwasher')" />
<area alt="microwave" title="microwave" href="javascript:void(0)" shape="rect" coords="19,169,163,259" style="outline:none;" target="_self" onclick="javascript:check('microwave')" />
<area alt="cupboard" title="cupboard" href="javascript:void(0)" shape="rect" coords="0,6,631,130" style="outline:none;" target="_self" onclick="javascript:check('cupboard')" />
<area alt="refrigerator" title="refrigerator" href="javascript:void(0)" shape="rect" coords="639,76,782,270" style="outline:none;" target="_self" onclick="javascript:check('refrigerator')" />
<area alt="freezer" title="freezer" href="javascript:void(0)" shape="rect" coords="639,269,782,389" style="outline:none;" target="_self" onclick="javascript:check('freezer')" />
<area alt="pan" title="pan" href="javascript:void(0)" shape="poly" coords="328,222,357,219,392,222,433,220,450,235,421,246,398,265,368,265,337,254,320,240" style="outline:none;" target="_self" onclick="javascript:check('pan')" />
<area alt="pot" title="pot" href="javascript:void(0)" shape="poly" coords="474,203,509,191,542,190,582,212,569,246,555,261,528,267,507,265,484,251" style="outline:none;" target="_self" onclick="javascript:check('pot')" />
<area alt="knife" title="knife" href="javascript:void(0)" shape="poly" coords="375,191,368,165,373,142,415,122,443,123,498,124,504,169,476,202" style="outline:none;" target="_self" onclick="javascript:check('knife')" />
</map>

<map name="bathroom" id="bathroom">
<area alt="toothbrush" title="toothbrush" href="javascript:void(0)" shape="rect" coords="268,248,357,275" style="outline:none;" target="_self" onclick="check('toothbrush')">
<area alt="bath" title="bath" href="javascript:void(0)" shape="rect" coords="5,272,368,372" style="outline:none;" target="_self" onclick="check('bath')">
<area alt="towel" title="towel" href="javascript:void(0)" shape="rect" coords="208,150,305,250" style="outline:none;" target="_self" onclick="check('towel')">
<area alt="mirror" title="mirror" href="javascript:void(0)" shape="rect" coords="326,77,530,191" style="outline:none;" target="_self" onclick="check('mirror')">
<area alt="trashcan" title="trashcan" href="javascript:void(0)" shape="rect" coords="488,266,552,352" style="outline:none;" target="_self" onclick="check('trashcan')">
<area alt="shower" title="shower" href="javascript:void(0)" shape="rect" coords="560,1,743,330" style="outline:none;" target="_self" onclick="check('shower')">
<area alt="soap" title="soap" href="javascript:void(0)" shape="rect" coords="35,32,177,198" style="outline:none;" target="_self" onclick="check('soap')">
<area alt="sink" title="sink" href="javascript:void(0)" shape="poly" coords="352,219,430,191,455,191,523,222,524,243,474,260,469,363,415,366,406,264,354,245" style="outline:none;" target="_self" onclick="check('sink')">
<area alt="toilet" title="toilet" href="javascript:void(0)" shape="poly" coords="770,239,862,239,861,310,856,360,809,372,749,361,744,306,748,294" style="outline:none;" target="_self" onclick="check('toilet')">
</map>

<!-- END image maps -->